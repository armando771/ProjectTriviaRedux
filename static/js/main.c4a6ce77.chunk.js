(this.webpackJsonpprojectreduxtrivia=this.webpackJsonpprojectreduxtrivia||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){},45:function(e,t,n){},47:function(e,t){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(20),c=n.n(r),i=n(14),o=n(15),l=(n(40),n(41),n(7)),u=n(22),d=n(3),b=n(4),j=n(8),h=n(6),p=n(5),m=n(25),O=n.n(m),g=n(28),f="REQUEST_TOKEN",v="REQUEST_TOKEN_SUCCESS",y="REQUEST_TOKEN_ERROR",x="REQUEST_QUESTIONS",k="REQUEST_QUESTIONS_SUCCESS",N="REQUEST_QUESTIONS_ERROR",S=function(e){return{type:y,payload:e}},C=function(e){return{type:k,payload:e}},w="USERINFOS",E=n(1),T=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(E.jsx)(i.b,{to:"/settings",children:Object(E.jsx)("button",{"data-testid":"btn-settings",type:"button",children:"Configura\xe7\xf5es"})})}}]),n}(s.a.Component),I=T,R=(n(45),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={email:"",name:"",disable:!0},a.handleChange=a.handleChange.bind(Object(j.a)(a)),a.validateLogin=a.validateLogin.bind(Object(j.a)(a)),a.getToken=a.getToken.bind(Object(j.a)(a)),a}return Object(b.a)(n,[{key:"getToken",value:function(){var e=this.props,t=e.getDataFromApi,n=e.userInfo,a=e.userNameEmail,s=this.state,r=s.name,c=s.email;t(),a(r,c),localStorage.setItem("token",n.token)}},{key:"setPlayerData",value:function(){var e=this.state,t=e.name,n=e.email;localStorage.setItem("state",JSON.stringify({player:{name:t,gravatarEmail:n,score:0,assertions:0}}))}},{key:"handleChange",value:function(e){var t=this,n=e.target,a=n.name,s=n.value;this.setState(Object(u.a)({},a,s),(function(){return t.validateLogin()}))}},{key:"validateLogin",value:function(){var e=this.state,t=e.email,n=e.name,a=!(/(.*)@(.*).com/.test(t)&&n.length>5);this.setState({disable:a})}},{key:"render",value:function(){var e=this,t=this.state,n=t.email,a=t.name,s=t.disable;return Object(E.jsxs)("div",{className:"login-container",children:[Object(E.jsx)("h2",{children:"Tr\xedvia"}),Object(E.jsxs)("form",{children:[Object(E.jsxs)("label",{htmlFor:"input-player-name",children:["Nome:",Object(E.jsx)("input",{"data-testid":"input-player-name",id:"input-player-name",type:"text",name:"name",value:a,onChange:this.handleChange})]}),Object(E.jsxs)("label",{htmlFor:"input-gravatar-email",children:["E-mail:",Object(E.jsx)("input",{"data-testid":"input-gravatar-email",id:"input-gravatar-email",type:"text",name:"email",value:n,onChange:this.handleChange})]}),Object(E.jsx)(i.b,{to:"/game",children:Object(E.jsx)("button",{"data-testid":"btn-play",type:"button",disabled:s,onClick:function(){e.getToken(),e.setPlayerData()},children:"Jogar"})}),Object(E.jsx)(I,{})]})]})}}]),n}(s.a.Component)),q=Object(o.b)((function(e){return{userInfo:e.userReducer.info}}),(function(e){return{getDataFromApi:function(t){return e(function(){var e=Object(g.a)(O.a.mark((function e(t){var n,a,s,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:f}),e.prev=1,e.next=4,fetch("https://opentdb.com/api_token.php?command=request");case 4:return n=e.sent,e.next=7,n.json();case 7:return a=e.sent,t((o=a.token,{type:v,payload:o})),localStorage.setItem("token",a.token),s="https://opentdb.com/api.php?amount=5&token=".concat(a.token),e.prev=11,e.next=14,fetch(s);case 14:return r=e.sent,e.next=17,r.json();case 17:c=e.sent,t(C(c.results)),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(11),t((i=e.t0,{type:N,payload:i}));case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(1),t(S(e.t1));case 29:case"end":return e.stop()}var i,o}),e,null,[[1,26],[11,21]])})));return function(t){return e.apply(this,arguments)}}())},userNameEmail:function(t){return e({type:w,name:t,email:n});var n}}}))(R),Q=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(E.jsx)("h1",{"data-testid":"settings-title",children:"Tela de configura\xe7\xf5es"})}}]),n}(s.a.Component),U=Q,A=n(19),J=n.n(A),B=(n(48),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.email,n=e.name,a=JSON.parse(localStorage.getItem("state")).player.score;return Object(E.jsxs)("header",{children:[Object(E.jsx)("img",{src:"https://www.gravatar.com/avatar/".concat(J()(t).toString()),"data-testid":"header-profile-picture",alt:"Name:".concat(n)}),Object(E.jsxs)("h2",{"data-testid":"header-player-name",children:[Object(E.jsx)("span",{className:"user",children:"User:"}),n]}),Object(E.jsxs)("span",{"data-testid":"header-score",className:"score",children:[Object(E.jsx)("span",{className:"score-text",children:"Placar:"}),a]})]})}}]),n}(a.Component)),P=Object(o.b)((function(e){return{email:e.userInfosReducer.email,name:e.userInfosReducer.name}}),null)(B),F=(n(49),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={seconds:30},a.count=a.count.bind(Object(j.a)(a)),a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.count()}},{key:"count",value:function(){var e=this,t=setInterval((function(){var n=e.state.seconds;e.setState({seconds:n-1}),1===n&&(clearInterval(t),e.setState({seconds:"Time's Up"}))}),1e3)}},{key:"render",value:function(){var e=this.state.seconds;return Object(E.jsxs)("div",{className:"timer",children:[Object(E.jsx)("p",{children:"Timer"}),Object(E.jsx)("span",{children:e})]})}}]),n}(a.Component)),_=n(9),D=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onClick,a=e.innerText,s=e.disabled;return Object(E.jsx)("button",{className:t,disabled:s,type:"button","data-testid":t,id:t,onClick:n,children:a})}}]),n}(a.Component);D.defaultProps={disabled:!1};var M=D,L=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onClick,a=e.innerText,s=e.key,r=e.dataTestId;return Object(E.jsx)("button",{className:t,type:"button","data-testid":r,name:t,onClick:n,children:a},s)}}]),n}(a.Component),V=L,W=(n(50),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={index:0},a.changeColorsAnswer=a.changeColorsAnswer.bind(Object(j.a)(a)),a.changeButtonVisibility=a.changeButtonVisibility.bind(Object(j.a)(a)),a.changeQuestions=a.changeQuestions.bind(Object(j.a)(a)),a.resetQuestions=a.resetQuestions.bind(Object(j.a)(a)),a}return Object(b.a)(n,[{key:"changeButtonVisibility",value:function(){document.getElementsByClassName("btn-next")[0].classList.add("visible")}},{key:"changeColorsAnswer",value:function(){var e=document.getElementById("correct-answer");document.getElementsByName("incorrect-answer").forEach((function(e){e.className+=" questionWrong"})),e.className+=" questionCorrect"}},{key:"changeQuestions",value:function(){this.setState((function(e){return{index:e.index+1}}))}},{key:"resetQuestions",value:function(){var e=document.getElementById("correct-answer");document.getElementsByName("incorrect-answer").forEach((function(e){return e.classList.remove("questionWrong")})),e.classList.remove("questionCorrect")}},{key:"sumUserPoints",value:function(){var e=this.props,t=e.timer,n=e.questions,a=this.state.index,s=10+t*function(){if("easy"===n[a].difficulty)return 1;if("medium"===n[a].difficulty)return 2;if("hard"===n[a].difficulty){return 3}}(),r=JSON.parse(localStorage.getItem("state"));localStorage.setItem("state",JSON.stringify({player:Object(_.a)(Object(_.a)({},r.player),{},{assertions:r.player.assertions+1,score:r.player.score+s})}))}},{key:"renderQuestions",value:function(){return this.props.questions[this.state.index].question.replace(/&quot;/gi,"").replace(/&#039;/gi,"").replace(/&eacute/gi,"").replace(/&amp/gi,"")}},{key:"render",value:function(){var e=this,t=this.state.index,n=this.props,a=n.questions,s=n.disabled;return 5===t?Object(E.jsx)(l.a,{to:"/feedback"}):Object(E.jsxs)("div",{className:"question-container",children:[Object(E.jsxs)("p",{className:"question-category","data-testid":"question-category",children:[Object(E.jsx)("span",{className:"category",children:"Category:"}),"".concat(a[t].category)]}),Object(E.jsxs)("p",{"data-testid":"question-text",className:"question-text",children:[Object(E.jsx)("span",{className:"question",children:"Question:"}),"".concat(this.renderQuestions())]}),Object(E.jsx)(M,{disabled:s,className:"correct-answer",onClick:function(){e.changeButtonVisibility(),e.changeColorsAnswer(),e.sumUserPoints()},innerText:a[t].correct_answer}),a[t].incorrect_answers.map((function(t,n){return Object(E.jsx)(V,{className:"incorrect-answer",dataTestId:"wrong-answer-".concat(n),onClick:function(){e.changeButtonVisibility(),e.changeColorsAnswer()},innerText:t},n)})),Object(E.jsx)(M,{className:"btn-next",innerText:"PR\xd3XIMA",onClick:function(){e.changeQuestions(),e.resetQuestions()}})]})}}]),n}(a.Component));W.defaultProps={disabled:!1};var K=W,X=(n(51),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).state={seconds:30,disabled:!1},e.count=e.count.bind(Object(j.a)(e)),e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.count()}},{key:"count",value:function(){var e=this,t=setInterval((function(){var n=e.state.seconds;e.setState({seconds:n-1}),1===n&&(clearInterval(t),e.setState({seconds:"Time's Up",disabled:!0}))}),1e3)}},{key:"render",value:function(){var e=this.state,t=e.disabled,n=e.seconds,a=this.props.questions;return Object(E.jsxs)("div",{className:"container",children:[Object(E.jsx)(F,{}),a.length?Object(E.jsx)(K,{questions:a,disabled:t,timer:n,count:this.count}):null]})}}]),n}(a.Component)),$=Object(o.b)((function(e){return{questions:e.questionsReducer.questions}}))(X),z=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(E.jsxs)("div",{children:[Object(E.jsx)(P,{}),Object(E.jsx)($,{})]})}}]),n}(a.Component),G=z,H=n(32),Y=(n(52),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).playAgain=e.playAgain.bind(Object(j.a)(e)),e.goToRanking=e.goToRanking.bind(Object(j.a)(e)),e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("state")).player,t=e.name,n=e.email,a=e.score,s={playerImage:"https://www.gravatar.com/avatar/".concat(J()(n).toString()),score:a,name:t},r=JSON.parse(localStorage.getItem("ranking"));r?localStorage.setItem("ranking",JSON.stringify([].concat(Object(H.a)(r),[s]))):localStorage.setItem("ranking",JSON.stringify([s]))}},{key:"playAgain",value:function(){this.props.history.push("/ProjectTriviaRedux")}},{key:"feedBackMessage",value:function(){return JSON.parse(localStorage.getItem("state")).player.assertions<3?"Podia ser melhor...":"Mandou bem!"}},{key:"goToRanking",value:function(){this.props.history.push("/ranking")}},{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("state")).player,t=e.name,n=e.assertions,a=e.gravatarEmail,s=e.score;return Object(E.jsxs)("div",{className:"feedback-container",children:[Object(E.jsxs)("header",{children:[Object(E.jsx)("img",{src:"https://www.gravatar.com/avatar/".concat(J()(a).toString()),"data-testid":"header-profile-picture",alt:"Name:".concat(t)}),Object(E.jsxs)("h3",{"data-testid":"header-player-name",children:[Object(E.jsx)("span",{className:"player",children:"Jogador:"}),t]}),Object(E.jsx)("p",{className:"total-score","data-testid":"header-score",children:s})]}),Object(E.jsxs)("div",{className:"results",children:[Object(E.jsx)("h2",{children:"Resultados"}),Object(E.jsxs)("p",{className:"assertions",children:["N\xfamero de acertos:",Object(E.jsx)("span",{"data-testid":"feedback-total-question",children:n})]}),Object(E.jsxs)("p",{className:"points",children:["Pontua\xe7\xe3o:",Object(E.jsx)("span",{"data-testid":"feedback-total-score",children:s})]}),Object(E.jsx)("p",{"data-testid":"feedback-text",children:this.feedBackMessage()}),Object(E.jsxs)("div",{className:"buttons-container",children:[Object(E.jsx)("button",{type:"button","data-testid":"btn-play-again",onClick:this.playAgain,children:"Jogar Novamente"}),Object(E.jsx)("button",{type:"button","data-testid":"btn-ranking",onClick:this.goToRanking,children:"Ver Ranking"})]})]})]})}}]),n}(s.a.Component)),Z=(n(53),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).playAgain=e.playAgain.bind(Object(j.a)(e)),e}return Object(b.a)(n,[{key:"playAgain",value:function(){this.props.history.push("/ProjectTriviaRedux")}},{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("ranking"));return Object(E.jsxs)("div",{className:"ranking",children:[Object(E.jsx)("p",{className:"title","data-testid":"ranking-title",children:"Ranking"}),Object(E.jsx)("div",{className:"players-container",children:e.sort((function(e,t){return t.score-e.score})).map((function(e,t){return Object(E.jsxs)("div",{className:"players",children:[Object(E.jsx)("img",{src:e.playerImage,alt:"player"}),Object(E.jsx)("h3",{"data-testid":"player-name-".concat(t),children:e.name}),Object(E.jsxs)("p",{"data-test-id":"player-score-".concat(t),children:["Pontua\xe7\xe3o:",Object(E.jsx)("span",{className:"score",children:e.score})]})]},t)}))}),Object(E.jsx)("button",{type:"button","data-testid":"btn-go-home",onClick:this.playAgain,children:"Voltar ao inicio"})]})}}]),n}(s.a.Component));function ee(){return Object(E.jsxs)(l.d,{children:[Object(E.jsx)(l.b,{exact:!0,path:"/ProjectTriviaRedux",component:q}),Object(E.jsx)(l.b,{exact:!0,path:"/settings",component:U}),Object(E.jsx)(l.b,{exact:!0,path:"/game",component:G}),Object(E.jsx)(l.b,{exact:!0,path:"/feedback",component:Y}),Object(E.jsx)(l.b,{exact:!0,path:"/ranking",component:Z})]})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te=n(17),ne=n(30),ae=n(31),se={info:{},isFetching:!0,error:""},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(_.a)(Object(_.a)({},e),{},{isFetching:!0});case v:return Object(_.a)(Object(_.a)({},e),{},{info:t.payload,isFething:!1});case y:return Object(_.a)(Object(_.a)({},e),{},{error:t.payload,isFetching:!1});default:return e}},ce={user:{name:"",email:""}},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;return t.type===w?Object(_.a)(Object(_.a)({},e),{},{name:t.name,emial:t.email}):e},oe={questions:[],isFetching:!0,error:""},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case x:return Object(_.a)(Object(_.a)({},e),{},{isFetching:!0});case k:return Object(_.a)(Object(_.a)({},e),{},{questions:t.payload,isFetching:!1});case N:return Object(_.a)(Object(_.a)({},e),{},{isFetching:!1,error:t.payload});default:return e}},ue=Object(te.combineReducers)({userReducer:re,userInfosReducer:ie,questionsReducer:le}),de=Object(te.createStore)(ue,Object(ae.composeWithDevTools)(Object(te.applyMiddleware)(ne.a))),be=de;window.Cypress&&(window.store=de),c.a.render(Object(E.jsx)(o.a,{store:be,children:Object(E.jsx)(i.a,{children:Object(E.jsx)(ee,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[54,1,2]]]);
//# sourceMappingURL=main.c4a6ce77.chunk.js.map